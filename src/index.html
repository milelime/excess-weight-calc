<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <h1>Excess Weight Calculator</h1>
    <form name="weightcalc" id="weightForm">
      <fieldset>
        <legend>Enter your height</legend>
        <label class="field_name">Enter Height (f)</label>
        <input name="height_feet" class="field" type="text" />
        <label class="field_name">Enter Height (in)</label>
        <input name="height_inches" class="field" type="text" />
        <br />
        <br />
        <legend>Enter your weight</legend>
        <label class="field_name">Enter Weight (lb)</label>
        <input name="weight" class="field" type="text" />
      </fieldset>

      <fieldset id="totalsFieldset">
        <legend>Totals</legend>

        <label class="field_name">Total excess weight</label>
        <div id="excess" class="result_display" data-percentage="1"></div>
        <br /><br />
        <label class="field_name">80% excess weight</label>
        <div
          id="eightyexcess"
          class="result_display"
          data-percentage=".8"
        ></div>
        <br /><br />
        <label class="field_name">60% excess weight</label>
        <div id="sixtyexcess" class="result_display" data-percentage=".6"></div>
        <br /><br />
        <label class="field_name">40% excess weight</label>
        <div id="fortyexcess" class="result_display" data-percentage=".4"></div>
        <br /><br />
        <label class="field_name">20% excess weight</label>
        <div
          id="twentyexcess"
          class="result_display"
          data-percentage=".2"
        ></div>
      </fieldset>

      <button type="button" onclick="calc()">Calculate</button>
    </form>
    <style>
      #totalsFieldset {
        display: none;
      }
    </style>
    <script>
      function calc() {
        const getValue = (fieldName) =>
          parseFloat(document.weightcalc[fieldName].value);

        var h = 12 * getValue("height_feet") + getValue("height_inches");
        var w = getValue("weight");
        var excess_weight = w - (25 * h * h) / 703;

        // Dynamically set the results into divs
        document.querySelectorAll(".result_display").forEach((field) => {
          let percentage = parseFloat(field.getAttribute("data-percentage"));
          field.innerText = (excess_weight * percentage).toFixed(2);
        });
        document.getElementById("totalsFieldset").style.display = "block";
      }
      window.addEventListener("load", function () {
        document.getElementById("weightForm").reset();
        document.getElementById("totalsFieldset").style.display = "none";
      });
    </script>
  </body>
</html>
